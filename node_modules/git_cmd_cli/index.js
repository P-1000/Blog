#!/usr/bin/env node
import chalk from "chalk";
import inquirer from "inquirer";
import gradient from "gradient-string";
import figlet from "figlet";
import { createSpinner } from "nanospinner";
import * as execa from "execa";
import * as child_process from "child_process";
import readline from "readline";
import { execSync } from "child_process";

try {
  execSync("git add .");
  console.log(chalk.green(figlet.textSync("AYIPAYE", { horizontalLayout: "full" })));
} catch (error) {
    console.log(chalk.green(figlet.textSync(`SAMA ERROR!  :  ${error.message}`, { horizontalLayout: "full" })));
 
}

const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout,
  });        
  
  rl.question("Enter commit message: ", (commitMessage) => {
    rl.question("Enter branch name: ", (branchName) => {
      rl.close();
  
      try {
        execSync(`git add . && git commit -m "${commitMessage}" && git push origin ${branchName}`);
        console.log("Git added, committed, and pushed, bro!");
      } catch (error) {
        console.error(`Error executing git commands: ${error.message}`);
      }
    });
  });

  //test